set -e

MASTER="${MASTER:-master}"

if [[ `git status --porcelain` ]]; then
  echo 'Your branch had uncommitted changes!'
fi

if (git remote | grep --fixed-strings --line-regexp --quiet 'upstream') then
  git checkout -B $1 upstream/$MASTER
  git fetch upstream
  git rebase upstream/$MASTER
else
  git checkout -B $1 origin/$MASTER
  git fetch origin
  git rebase origin/$MASTER
fi
